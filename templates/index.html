<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Todo App - Protobuf Edition</title>
    <link rel="stylesheet" href="/static/styles.css">
    <script>window.NODE_ENV = 'development';</script>
    <script type="importmap">
    {
        "imports": {
            "xstate": "https://cdn.jsdelivr.net/npm/xstate@5.25.0/+esm",
            "protobufjs": "https://esm.sh/protobufjs@7.2.5",
            "react": "/node_modules/react/esm/react.production.min.js",
            "react-dom": "/node_modules/react-dom/esm/react-dom.production.min.js",
            "react-dom/client": "/node_modules/react-dom/esm/react-dom-client.production.min.js",
            "htm": "/node_modules/htm/dist/htm.mjs",
            "@floating-ui/react-dom-interactions": "/node_modules/@floating-ui/react-dom-interactions/dist/floating-ui.react-dom-interactions.esm.js",
            "vibe-kanban-web-companion": "/node_modules/vibe-kanban-web-companion/src/index.js"
        }
    }
    </script>
    <script src="https://unpkg.com/htmx.org@1.9.10"></script>
</head>

<body>
    <div id="vibe-kanban-root"></div>
    <div id="app">
        <header>
            <h1>Todo List</h1>
            <div id="stats">
                <div class="stats">
                    <span><strong>0</strong> total</span>
                    <span><strong>0</strong> active</span>
                    <span><strong>0</strong> completed</span>
                </div>
            </div>
        </header>
        <main>
            <form id="todo-form">
                <input type="text" name="title" placeholder="What needs to be done?" required autocomplete="off">
                <button type="submit">Add</button>
            </form>
            <div class="filter-tabs">
                <button class="filter-tab active" onclick="window.changeFilter('all')">All</button>
                <button class="filter-tab" onclick="window.changeFilter('active')">Active</button>
                <button class="filter-tab" onclick="window.changeFilter('completed')">Completed</button>
            </div>
            <ul id="todo-list" class="todo-items">
                <li class="loading-state">Loading todos...</li>
            </ul>
        </main>
        <footer>
            <div hx-get="/system-info" hx-trigger="load">
                Loading system info...
            </div>
        </footer>
    </div>
    <div id="confirm-modal" class="modal-overlay">
        <div class="modal">
            <p>Delete this todo?</p>
            <div class="modal-buttons">
                <button onclick="window.cancelDelete()">Cancel</button>
                <button class="danger" onclick="window.confirmDelete()">Delete</button>
            </div>
        </div>
    </div>
    <script type="module" src="/static/app.js"></script>
</body>

</html>